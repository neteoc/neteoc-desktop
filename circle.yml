machine:
  node:
    version: 6.10.0
dependencies:
  pre:
    - sudo dpkg --add-architecture i386
    - wget https://dl.winehq.org/wine-builds/Release.key
    - sudo apt-key add Release.key
    - sudo apt-add-repository https://dl.winehq.org/wine-builds/ubuntu/
    - sudo apt-get update
    - sudo apt-get install --install-recommends winehq-stable zip
  override:
    - npm run setup
compile:
  override:
    - npm run package-linux && zip -r linux.zip ./release-builds/*-linux-x64
    - npm run package-win && zip -r Windows.zip ./release-builds/*-win32-ia32
    - npm run build-mac && zip -r Mac.zip ./release-builds/*-darwin-x64
    - cp -R ./release-builds/*.zip $CIRCLE_ARTIFACTS
deployment:
  production:
    branch: prod
    commands:
      - echo Getting Started
